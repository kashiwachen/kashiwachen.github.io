# 数据库架构

如何设计数据库，使用什么类型的数据库，就是一个架构师必须了解的。所有的数据库的共同点都是以某种方式存储数据，以某种接口来访问存储的数据。

## 常用概念

- 水平分割（横打散）
- 垂直分割（列打散）
  按照某一列数据的特性（时间）去分割表格。
- 垂直、水平分割结合运用

## 架构模式

在实际项目中，很多人会把架构模式跟架构概念混为一谈，实际上他们是两个东西。
数据库架构主要分为2种：

- 单库+缓存设计

- 多库设计之主从读写分离。
  多库架构中，又有两种比较流行的数据存储方式：集群数据库、分布式数据库。

## 单库与多库的优缺点

若按架构进行开发，架构越长远，那么开发周期内需要考虑的东西越多，且**初期数据量**并不能够达到该架构要的*负载瓶颈*。
在IT创业界有句话，叫三月一版本，三年一重构，而一次重构的架构设计，就应该是考虑到三年后的数据量，还有负载、抗压能力。他人经验：单库+缓存的数据库设计也完全能够轻轻松松做到百万级，乃至于千万级的数据抗压。

## 架构中的注意事项

1. 模块切割
2. 分析常用字段
3. 应完全避免为空设计（免NULL）
   尽可能将字段定义为NOT NULL。MySQL难以优化使用了可空列的查询，它会使索引、索引统计和值更加复杂。
   在表中存储可为空的字段，也是有办法不使用NULL的，可以考虑使用0，**特殊值**或字符串来代替它。

## 不同类型的数据库架构

### 关系型数据库

关系型数据库以数据表Table为核心来存储数据。数据是一行一行的表记录Record。表之间通过关联关系相互关联。 关系模型是表(行，列)组成的二维结构。SQL是关系型数据库的统一查询接口。

关系型数据库的架构设计，***主要是要解决存储和事务***。存储是要解决数据的查询问题。而事务则包含了四个特性，A（原子性）C（一致性）I（隔离性）D（持久性）。

## Ref:

[MySql什么是数据库架构设计](https://zhuanlan.zhihu.com/p/29368249)

[谈谈数据库架构](https://zhuanlan.zhihu.com/p/107336513)

